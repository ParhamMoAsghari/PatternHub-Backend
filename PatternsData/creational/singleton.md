# الگوی تک‌نمونه (Singleton Pattern)

### همچنین شناخته شده به عنوان:
- الگوی تک‌نمونه

### انگیزه (Motivation):
هدف الگوی تک‌نمونه این است که فراهم کند یک کلاس تنها یک نمونه از خود را داشته باشد و امکان دسترسی به آن نمونه را به صورت گسترده‌ای در سراسر برنامه فراهم کند. این الگو در مواقعی که بخواهیم تضمین کنیم تنها یک نمونه از یک کلاس در سراسر برنامه وجود داشته باشد و نیاز به دسترسی به آن در سرتاسر کد وجود دارد، مورد استفاده قرار می‌گیرد.

### قابلیت استفاده (Applicability):
الگوی تک‌نمونه وقتی مناسب است که:
- بخواهیم یک کلاس داشته باشیم که تنها یک نمونه از آن در سراسر برنامه وجود داشته باشد.
- نیاز داریم که از این نمونه در سراسر کد به صورت متمرکز استفاده کنیم.

### ساختار (Structure):
الگوی تک‌نمونه شامل موارد زیر است:
- `Singleton`: کلاسی که تنها یک نمونه از آن وجود دارد و دسترسی به آن نمونه را فراهم می‌کند.

### شرکت‌کننده (Participant):
- `Singleton`: کلاسی که تنها یک نمونه از آن وجود دارد و دسترسی به آن نمونه را فراهم می‌کند.

### همکاری (Collaboration):
- همکاری در این الگو به صورت مستقیم با سایر کلاس‌ها انجام نمی‌شود.

### پیامدها (Consequences):
استفاده از الگوی تک‌نمونه دارای مزایا و معایب زیر است:
- **مزایا**:
    - تضمین می‌کند که تنها یک نمونه از یک کلاس وجود دارد و دسترسی به آن در

سراسر برنامه امکان‌پذیر است.
- قابلیت دسترسی به نمونه تک‌نمونه به صورت گسترده و ساده در سراسر برنامه.
- **معایب**:
    - ممکن است منجر به مشکلات مربوط به تست و نمونه‌برداری شود.
    - ممکن است منجر به زیاده‌خواهی و کاهش انعطاف‌پذیری کد شود.

### پیاده‌سازی (Implementation):
در زبان برنامه‌نویسی C#، می‌توانیم الگوی تک‌نمونه را به صورت زیر پیاده‌سازی کنیم:

```csharp
public class Singleton
{
    private static Singleton _instance;
    private static readonly object _lockObject = new object();

    private Singleton()
    {
        // Constructor is private to prevent direct instantiation
    }

    public static Singleton Instance
    {
        get
        {
            if (_instance == null)
            {
                lock (_lockObject)
                {
                    if (_instance == null)
                    {
                        _instance = new Singleton();
                    }
                }
            }
            return _instance;
        }
    }

    // Other members and methods of the Singleton class
}
```

در این مثال، نمونه‌ی تک‌نمونه در ویژگی `Instance` با استفاده از روش دیرگونه (Lazy Initialization) ایجاد می‌شود. همچنین از الگوی قفل‌گذاری متقابل (Double-Checked Locking) استفاده شده است تا از همروندی (Concurrency) مشکلی بوجود نیاید.

### استفاده‌های شناخته شده (Known Uses):
استفاده از الگوی تک‌نمونه در سناریوهای مختلف برنامه‌نویسی شامل مدیریت تنظیمات، لاگ‌گیری، کش‌سازی، اتصال به پایگاه داده و سرویس‌های شبکه می‌شود.

### الگوهای مرتبط (Related Patterns):
- **Monostate Pattern**: Monostate Pattern نیز از یک نمونه تنها برای کلاس استفاده می‌کند، اما تفاوتی که با الگوی تک‌نمونه دارد این است که وضعیت (State) همه نمونه‌ها به صورت یکسان است.
- **Multiton Pattern**: Multiton Pattern اجازه می‌دهد چند نمونه از یک کلاس ت

عریف کنید و به طور معمول با استفاده از کلیدها (Keys) به نمونه‌ها دسترسی پیدا کنید. این الگو در مواردی که بخواهید تنها تعداد محدودی از نمونه‌ها در سراسر برنامه وجود داشته باشد مورد استفاده قرار می‌گیرد.