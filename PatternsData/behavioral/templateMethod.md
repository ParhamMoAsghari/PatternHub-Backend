# الگوی Template Method

### همچنین شناخته شده به عنوان:
- الگوی شیوه‌ی قالبی

### انگیزه (Motivation):
الگوی Template Method در نرم‌افزارها استفاده می‌شود وقتی که بخواهیم یک الگوریتم را در یک کلاس اصلی تعریف کنیم و بخش‌هایی از آن را به زیرکلاس‌ها واگذار کنیم. با استفاده از این الگو، ترتیب اجرای مراحل یک الگوریتم مشخص می‌شود و زیرکلاس‌ها می‌توانند قسمت‌هایی از آن را بازنویسی کنند بدون تغییر در ساختار کلی الگوریتم.

### قابلیت استفاده (Applicability):
الگوی Template Method وقتی مناسب است که:
- می‌خواهیم یک الگوریتم را در یک کلاس اصلی تعریف کنیم و ترتیب اجرای مراحل آن را مشخص کنیم.
- می‌خواهیم بخش‌هایی از الگوریتم را به زیرکلاس‌ها واگذار کنیم برای اعمال تغییرات و سفارشی سازی.

### ساختار (Structure):
الگوی Template Method شامل موارد زیر است:
- `AbstractClass`: کلاس اصلی است که الگوریتم را تعریف می‌کند و متد `TemplateMethod` را داراست. این متد ترتیب اجرای مراحل الگوریتم را مشخص می‌کند و بخش‌های قابل تغییر را با فراخوانی متدهایی که در زیرکلاس‌ها قابل بازنویسی هستند فراهم می‌کند.
- `ConcreteClass`: زیرکلاس‌ها که بخش‌هایی از الگوریتم را برای سفارشی سازی پیاده‌سازی می‌کنند.

### شرکت‌کنندگان (Participants):
- `AbstractClass`: کلاس اصلی که الگوریتم را تعریف می‌کند و متد `TemplateMethod` را داراست.
- `ConcreteClass`: زیرکلاس‌ها که بخ

ش‌هایی از الگوریتم را برای سفارشی سازی پیاده‌سازی می‌کنند.

### همکاری (Collaborations):
- `AbstractClass` با تعریف الگوریتم و مشخص کردن ترتیب اجرای مراحل، زیرکلاس‌ها را به فراخوانی متدهایی که برای بازنویسی در دسترس قرار می‌دهد، تشویق می‌کند.

### پیامدها (Consequences):
استفاده از الگوی Template Method دارای مزایا و معایب زیر است:
- **مزایا**:
    - امکان تعریف یک الگوریتم کلی در یک کلاس اصلی و اجازه دادن به زیرکلاس‌ها برای سفارشی سازی بخش‌های آن.
    - اجتناب از تکرار کدها و تشابه در بخش‌های مشابه الگوریتم.
    - افزایش انعطاف‌پذیری و قابلیت توسعه الگوریتم با اضافه کردن زیرکلاس‌های جدید.

- **معایب**:
    - برخی از زیرکلاس‌ها ممکن است از اجزای ثابت الگوریتم استفاده نکنند و بخشی را بازنویسی کنند که منجر به بی‌استفاده شدن اجزای الگوریتم شود.
    - ممکن است الگوریتم‌های بزرگ و پیچیده باعث افزایش پیچیدگی کلاس‌ها و ارتباطات بین آنها شوند.

### پیاده‌سازی (Implementation):
در زبان برنامه‌نویسی C#، می‌توانیم الگوی Template Method را به صورت زیر پیاده‌سازی کنیم:

```csharp
// AbstractClass
public abstract class AbstractClass
{
    public void TemplateMethod()
    {
        // اجرای مرحله یک
        StepOne();

        // اجرای مرحله دو
        StepTwo();

        // اجرای مرحله سه
        StepThree();
    }

    protected abstract void StepOne();
    protected abstract void StepTwo();
    protected abstract void StepThree();
}

// ConcreteClass
public class ConcreteClass : AbstractClass
{
    protected override void StepOne()
    {
        // پیاده‌سازی مرحله یک
    }

    protected override void Step

Two()
    {
        // پیاده‌سازی مرحله دو
    }

    protected override void StepThree()
    {
        // پیاده‌سازی مرحله سه
    }
}
```

### استفاده‌های شناخته شده (Known Uses):
الگوی Template Method در بسیاری از فریمورک‌ها و کتابخانه‌های برنامه‌نویسی استفاده می‌شود، مانند:
- متدهای `OnCreate`, `OnStart`, `OnPause` و `OnDestroy` در Android Activity Lifecycle.
- متدهای `run` و `step` در کتابخانه‌های شبیه‌سازی بازی.

### الگوهای مرتبط (Related Patterns):
- **Factory Method Pattern**: در Factory Method Pattern، متد `FactoryMethod` تعیین می‌کند کدامیک از زیرکلاس‌ها باید ایجاد شود، در حالی که در Template Method Pattern، متد `TemplateMethod` الگوریتم را تعریف می‌کند و زیرکلاس‌ها بخش‌های آن را پیاده‌سازی می‌کنند.
- **Strategy Pattern**: در Strategy Pattern، الگوریتم به عنوان یک استراتژی مشخص شده و می‌تواند در طول اجرای برنامه تغییر کند، در حالی که در Template Method Pattern الگوریتم کلی تعریف شده و فقط بخش‌های آن قابل بازنویسی است.